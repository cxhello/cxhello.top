---
heading: 'jq Cheat Sheet'
title: 'jq Cheat Sheet'
date: '2025-09-05'
icon: 'Bash'
draft: false
summary: 'How to use jq to manipulate JSON data.'
tags: [jq]
---

## ğŸŸ¢ åŸºç¡€æ“ä½œ

```bash
jq '.' file.json                        # æ ¼å¼åŒ–è¾“å‡º JSON
jq '.userId' file.json                  # å–å­—æ®µ
jq '.candidateUserList[0]' file.json    # å–æ•°ç»„ç¬¬1ä¸ªå…ƒç´ 
jq '.candidateUserList[]' file.json     # éå†æ•°ç»„æ‰€æœ‰å…ƒç´ 
jq -r '.userId' file.json               # åŸå§‹å­—ç¬¦ä¸²è¾“å‡º (å»æ‰å¼•å·)
```

---

## ğŸŸ¢ ç­›é€‰ (select)

```bash
jq '.[] | select(.userId == "123")' file.json
jq '.[] | select(.candidateUserList | length > 0)' file.json
jq '.[] | select(.age > 18 and .gender == "male")' file.json
```

---

## ğŸŸ¢ å­—æ®µå¤„ç†

```bash
jq '.[] | {id: .userId, users: .candidateUserList}' file.json   # é€‰å–å­—æ®µ
jq '.[] | {id, count: (.candidateUserList | length)}' file.json # æ·»åŠ è®¡ç®—å­—æ®µ
jq 'del(.candidateUserList)' file.json                         # åˆ é™¤å­—æ®µ
```

---

## ğŸŸ¢ æ•°ç»„ä¸é›†åˆ

```bash
jq '.candidateUserList | length' file.json     # æ•°ç»„é•¿åº¦
jq '.candidateUserList | unique' file.json     # æ•°ç»„å»é‡
jq '.candidateUserList | sort' file.json       # æ’åº
jq '.candidateUserList | join(",")' file.json  # æ‹¼æ¥ä¸ºå­—ç¬¦ä¸²
```

---

## ğŸŸ¢ åˆå¹¶å¤šä¸ªæ–‡ä»¶

```bash
jq -s '.' *.json > merged.json    # åˆå¹¶æˆæ•°ç»„
jq -s 'add' *.json > merged.json  # åˆå¹¶æ•°ç»„å†…å®¹ä¸ºä¸€ä¸ªå¤§æ•°ç»„
```

---

## ğŸŸ¢ åˆ†ç»„ä¸ç»Ÿè®¡

```bash
# æŒ‰ userId åˆ†ç»„ï¼Œç»Ÿè®¡æ¯ç»„æ•°é‡
jq '.[] | group_by(.userId) | map({id: .[0].userId, count: length})' file.json

# ç»Ÿè®¡ candidateUserList æ•°ç»„é•¿åº¦
jq '.[] | {id: .userId, size: (.candidateUserList | length)}' file.json
```

---

## ğŸŸ¢ å¤šæ¡ä»¶

```bash
jq '.[] | select(.userId == "123" and (.candidateUserList | length > 0))' file.json
```

---

## ğŸŸ¢ ä¿®æ”¹ä¸ç”Ÿæˆæ–° JSON

```bash
jq 'map({uid: .userId, users: .candidateUserList})' file.json
jq '[.[] | {id: .userId, users: .candidateUserList}]' file.json
```

---

âœ… å°æŠ€å·§ï¼š

- `.` è¡¨ç¤ºå½“å‰å¯¹è±¡
- `.[]` éå†æ•°ç»„
- `|` ç®¡é“è¿æ¥
- `select()` æ¡ä»¶è¿‡æ»¤
- `map()` å¯¹æ•°ç»„åšæ˜ å°„
- `length` è·å–é•¿åº¦
- `unique` å»é‡
- `del()` åˆ é™¤å­—æ®µ
